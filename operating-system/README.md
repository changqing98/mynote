# 操作系统

操作系统是管理计算机硬件与软件资源的计算机程序。

## 一、 概论

### 1.1 中断和异常

操作系统提供的主要功能都是由操作系统内核程序实现的，CPU在运行上层程序时唯一能进入内核程序运行的途径就是通过中断或异常。

### 1.2 系统调用

系统调用是操作系统内核态程序与用户态程序的接口。



## 二、 进程与线程

### 2.1 进程

#### 2.1.1 初始进程

Linux下有3个特殊的初始进程：

- 0号idle进程，系统自动创建，唯一一个没有通过fork或kernel_thread产生的进程；
- 1号init进程，0号进程创建，首先Linux内核先启动，完成系统的初始化，然后再用户空间启动init进程，在系统完成之后，init进程将变为守护进程，是系统中其他所有用户进程的祖先进程；
- 2号kthreadd进程，0号进程创建，并始终运行在内核空间内，负责所有的内核线程kernel_thread的调度和管理，会循环执行kthread函数，作用就是运行kthread_create_list全局链表中维护的kthread, 当我们调用kernel_thread创建的内核线程会被加入到此链表中，所有其他的内核线程都是以kthreadd为父进程。

#### 2.1.2 函数创建

一个现有的进程可以通过调用fork函数创建一个新进程，子进程返回0，父进程返回子进程的id，出错返回-1.

### 2.2 线程

#### 2.2.1 进程与线程的区别

进程是系统资源分配的最小单位，线程是处理机调度的最小单位。

### 2.3 进程通信

- 互斥量
- 

共享内存互斥锁mutex，文件锁

### 2.4 进程调度

1. 高级调度（作业调度）
2. 中级调度
3. 低级调度（进程调度）